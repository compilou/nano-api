<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: model/index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: model/index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Î¼ Nano API
 *
 * Just a prototype.
 *
 * @author John Murowaniecki &lt;jmurowaniecki@gmail.com>
 * @link   https://github.com/compilou/nano-api
 *
 * @class  ORM
 *
 */
const Mongoose = require('mongoose');

const { Schema } = Mongoose;

const {
  MONGODB_URL = process.env.MONGODB_RESOURCE,
  MONGODB_CFG = {
    useNewUrlParser: true,
    useFindAndModify: false,
    useUnifiedTopology: true
  }
} = process.env;

class ORM {

  /**
   * Creates an instance of ORM self injecting Mongoose.
   *
   * @author John Murowaniecki &lt;john@compilou.com.br>
   *
   * @param {Array} Array of strings - models files.
   *
   * @memberof ORM
   */
  constructor (models) {
    this.Models = {};
    this.Schema = {};

    this.DB = Mongoose;
    this.DB.connect(MONGODB_URL, MONGODB_CFG, (err) => {
      if (err) {
        process.exit(1);
      }
    });

    models.forEach((model) => {
      const Model = model.charAt(0).toUpperCase() + model.slice(1);
      try {
        this.Schema[model] = new Schema(require(`./${model}`), { collection: `${model}Collection` });
        this.Models[model] = Mongoose.model(model, this.Schema[model]);
        this[Model] = this.Models[model];
      } catch (error) {
        // console.log("Error loading model", model, error);
      }
    });
  }
}

module.exports = (models) => new ORM(models);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Meeting.html">Meeting</a></li><li><a href="ORM.html">ORM</a></li><li><a href="ORM.ORM.html">ORM</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Sun May 31 2020 04:55:31 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
